<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>WebAR Example</title>
    <style>
      #video {
        display: none;
      }
      canvas {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <video id="video"></video>
    <canvas id="canvas"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/holistic"></script>
    <script>
      const video = document.getElementById('video');
      const canvas = document.getElementById('canvas');
      const context = canvas.getContext('2d');
      const holistic = new Holistic({locateFile: (file) => {
        return `https://cdn.jsdelivr.net/npm/@mediapipe/holistic/${file}`;
      }});
      
      async function setupCamera() {
        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
          throw new Error('Browser API navigator.mediaDevices.getUserMedia not available');
        }
        
        const stream = await navigator.mediaDevices.getUserMedia({
          'audio': false,
          'video': {
            facingMode: 'user',
            width: 640,
            height: 480
          }
        });
        
        video.srcObject = stream;
      }
      
      function drawFaceLandmarks(face) {
        const landmarks = face.scaledMesh;
        
        context.strokeStyle = '#00FF00';
        context.lineWidth = 2;
        
        for (let i = 0; i < landmarks.length; i++) {
          const [x, y, z] = landmarks[i];
          
          context.beginPath();
          context.arc(x, y, 1, 0, 2 * Math.PI);
          context.stroke();
        }
      }
      
      async function main() {
        await setupCamera();
        video.play();
        
        holistic.onResults((results) => {
          context.clearRect(0, 0, canvas.width, canvas.height);
          drawFaceLandmarks(results.faceLandmarks);
        });
        
        holistic.start({video: video});
      }
      
      main();
    </script>
  </body>
</html>
